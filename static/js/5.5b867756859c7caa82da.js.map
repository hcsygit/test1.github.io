{"version":3,"sources":["webpack:///src/views/home.vue","webpack:///./src/views/home.vue?1ad5","webpack:///./src/views/home.vue"],"names":["isUp","home","htouch","_this","this","getData","gundong","info","center","res","longitude","latitude","obj","init","provinces","marker","icon","name","map","setFitView","startY","addEventListener","ev","toLowerCase","pageX","pageY","endY","startX","endX","result","GetSlideDirection","direction","self","isShow","v","views_home","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","header","hheader","slot","_v","id","on","click","class","_l","$event","$store","commit","$router","push","project_id","src","photo","alt","_s","_f","project_name","location","btnon","work_status","type","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"uGA6BA,IAAAA,GAAA,EACAC,yCAMA,6CAEA,yCAKAC,6BAEA,IAAAC,EAAAC,kCAEAC,YAEAC,+CAMAF,gEAEAG,OACAA,oDAGA,aAEA,GACAC,OAAAC,EAAAC,UAAA,IAAAD,EAAAE,cAEA,oCAGAC,8BAIAC,2DAMA,8EAOAC,oCAEA,oDAGA,OAEA,6BAEA,KACAC,kBACA,4BAEA,iEAEA,8BAEAC,6BACA,gCACA,WACA,eACAC,SAEAC,0DAGA,gBACAD,SAEAC,kBACA,iCACA,8DAGA,gBACAD,6BACA,OAEAC,WAGAH,KAEAI,oCAMAC,IAFAhB,OACA,YAEAiB,iBACA,sBAAAC,uBAEAC,2BACAC,qBACAC,QAGA,YACAJ,iBACA,oBAAAC,OAEAI,sBACAF,4BACAC,YAwCA,SAAAE,EAAAP,EAAAQ,EAAAF,WAEAA,IAEA,QAGA,MAGA,EAEA,SAEAG,EArDAC,CACAH,EACAP,EACAQ,EAEAF,oCAEA,SAEAK,QACA,EAEA,WACA,YAEA,EACA,WACA,EAEAC,EAAAC,OAAA,QAQA,2EAOA,MAEAC,KC3LA,IAGAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAjC,KAAakC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,WAAgBG,OAAOC,OAAAP,EAAAQ,WAAsBL,EAAA,KAAUE,YAAA,oBAAAC,OAAuCG,KAAA,SAAeA,KAAA,YAAcT,EAAAU,GAAA,KAAAP,EAAA,WAA8BE,YAAA,kCAA4CF,EAAA,OAAYE,YAAA,MAAAC,OAAyBK,GAAA,aAAiBC,IAAKC,MAAAb,EAAAxB,QAAkBwB,EAAAU,GAAA,KAAAP,EAAA,MAAuBE,YAAA,SAAAS,OAA4BF,GAAAZ,EAAAJ,QAAgBU,OAAQK,GAAA,UAAcX,EAAAe,GAAAf,EAAA,iBAAAH,GAAkC,OAAAM,EAAA,MAAgBE,YAAA,OAAAO,IAAuBC,MAAA,SAAAG,GAAyBhB,EAAAiB,OAAAC,OAAA,gBAAmClB,EAAAmB,QAAAC,KAAA,yBAAAvB,EAAAwB,gBAA6DlB,EAAA,OAAYE,YAAA,cAAwBF,EAAA,OAAYG,OAAOgB,IAAAzB,EAAA0B,MAAAC,IAAA,QAAwBxB,EAAAU,GAAA,KAAAP,EAAA,OAA0BE,YAAA,eAAyBF,EAAA,MAAAH,EAAAU,GAAAV,EAAAyB,GAAAzB,EAAA0B,GAAA,cAAA1B,CAAAH,EAAA8B,kBAAA3B,EAAAU,GAAA,KAAAP,EAAA,KAAAA,EAAA,KAA+FE,YAAA,0BAAoCL,EAAAU,GAAA,6BAAAV,EAAAyB,GAAAzB,EAAA0B,GAAA,cAAA1B,CAAAH,EAAA+B,WAAA,8BAAA5B,EAAAU,GAAA,KAAAP,EAAA,cAA2IW,OAAOe,MAAA,GAAAhC,EAAAiC,aAAyBxB,OAAQyB,KAAA,UAAAC,KAAA,UAAgChC,EAAAU,GAAAV,EAAAyB,GAAAzB,EAAA0B,GAAA,aAAA1B,CAAAH,EAAAiC,kBAAA,SAA4D,IAE7qCG,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAxE,EACAkC,GATA,EAVA,SAAAuC,GACAF,EAAA,SAaA,KAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/5.5b867756859c7caa82da.js","sourcesContent":["<template>\r\n    <div class=\"home\">\r\n        <hheader :header=\"hheader\">\r\n            <i class=\"iconfont icon-ren\" slot=\"hleft\"></i>\r\n        </hheader>\r\n        <section class=\"container has-header has-gray\">\r\n            <!-- 地图 -->\r\n            <div class=\"map\" id=\"container\" @click=\"init\"></div>\r\n            <!-- 列表 -->\r\n            <ul class=\"map-ul\" id=\"mapUl\" :class=\"{'on':isShow}\">\r\n                <li class=\"item\" v-for=\"v in mapList\" @click=\"$store.commit('editFooter', 1);$router.push('/monitoring?projectId='+v.project_id+'')\">\r\n                    <div class=\"item-left\">\r\n                        <img :src=\"v.photo\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"item-right\">\r\n                        <h4>{{v.project_name|projectName}}</h4>\r\n                        <p>\r\n                            <i class=\"iconfont icon-dingwei\"></i>\r\n                            {{v.location|projectName}}\r\n                        </p>\r\n                    </div>\r\n                    <van-button type=\"primary\" :class=\"{'btnon':v.work_status!=1}\" size=\"mini\">{{v.work_status|workStatus}}</van-button>\r\n                </li>\r\n            </ul>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nvar isUp = false;\r\nexport default {\r\n    data() {\r\n        return {\r\n            hheader: {\r\n                title: \"贵州联合土木工程结构物安全健康大数据信息平台\"\r\n            },\r\n            mapList: [],\r\n            isShow: false,\r\n            provinces: [] //定位坐标\r\n        };\r\n    },\r\n    created() {\r\n        this.htouch();\r\n    },\r\n    mounted() {\r\n        this.$nextTick(re => {\r\n            this.getData();\r\n            //滚动\r\n            this.gundong();\r\n        });\r\n    },\r\n    methods: {\r\n        //获取数据\r\n        getData() {\r\n            let self = this;\r\n            self.$.Post(\"/project/projectList\", {}, re => {\r\n                self.mapList = re.info;\r\n                var arr = re.info;\r\n                //\r\n                arr.forEach(res => {\r\n                    if (res.longitude && res.latitude) {\r\n                        var obj = {\r\n                            name: \"\",\r\n                            center:\r\n                                \"\" + res.longitude + \",\" + res.latitude + \"\",\r\n                            type: 1,\r\n                            subDistricts: []\r\n                        };\r\n                        self.provinces.push(obj);\r\n                    }\r\n                });\r\n                if (self.provinces.length > 0) {\r\n                    self.init();\r\n                }\r\n            });\r\n        },\r\n        //滚动\r\n        gundong() {\r\n            var w = document.getElementById(\"mapUl\");\r\n            w.onscroll = function(e) {\r\n                w.scrollTop < 10 ? (isUp = true) : (isUp = false);\r\n            };\r\n        },\r\n        //地图标点\r\n        init() {\r\n            var provinces = this.provinces;\r\n            if (!provinces || provinces.length == 0) {\r\n                return false;\r\n            }\r\n            var map = new AMap.Map(\"container\", {\r\n                resizeEnable: true,\r\n                zoom: 4\r\n            });\r\n            var markers = []; //province见Demo引用的JS文件\r\n            for (var i = 0; i < provinces.length; i += 1) {\r\n                var marker;\r\n                if (provinces[i].type == 0) {\r\n                    var icon = new AMap.Icon({\r\n                        image: \"https://vdata.amap.com/icons/b18/1/2.png\",\r\n                        size: new AMap.Size(24, 24)\r\n                    });\r\n                    marker = new AMap.Marker({\r\n                        icon: icon,\r\n                        position: provinces[i].center.split(\",\"),\r\n                        offset: new AMap.Pixel(-12, -12),\r\n                        zIndex: 101,\r\n                        title: provinces[i].name,\r\n                        map: map\r\n                    });\r\n                } else {\r\n                    marker = new AMap.Marker({\r\n                        position: provinces[i].center.split(\",\"),\r\n                        title: provinces[i].name,\r\n                        map: map\r\n                    });\r\n                    if (provinces[i].type === 2) {\r\n                        var content = \"<div class = 'taiwan'>宝岛台湾</div>\";\r\n                        baodao = new AMap.Marker({\r\n                            content: content,\r\n                            position: provinces[i].center.split(\",\"),\r\n                            title: provinces[i].name,\r\n                            offset: new AMap.Pixel(0, 0),\r\n                            map: map\r\n                        });\r\n                    }\r\n                }\r\n                markers.push(marker);\r\n            }\r\n            map.setFitView();\r\n        },\r\n        //判断向上还是向下\r\n        htouch() {\r\n            let self = this;\r\n            let targetName = \"\";\r\n            var startX, startY;\r\n            document.addEventListener(\r\n                \"touchstart\",\r\n                function(ev) {\r\n                    targetName = ev.target.nodeName.toLowerCase();\r\n                    startX = ev.touches[0].pageX;\r\n                    startY = ev.touches[0].pageY;\r\n                },\r\n                false\r\n            );\r\n            document.addEventListener(\r\n                \"touchend\",\r\n                function(ev) {\r\n                    var endX, endY;\r\n                    endX = ev.changedTouches[0].pageX;\r\n                    endY = ev.changedTouches[0].pageY;\r\n                    var direction = GetSlideDirection(\r\n                        startX,\r\n                        startY,\r\n                        endX,\r\n                        endY\r\n                    );\r\n                    if (targetName.indexOf(\"canvas\") > -1) {\r\n                        return false;\r\n                    }\r\n                    switch (direction) {\r\n                        case 0:\r\n                            //无操作\r\n                            break;\r\n                        case 1:\r\n                            // 向上\r\n                            self.isShow = true;\r\n                            break;\r\n                        case 2:\r\n                            // 向下\r\n                            isUp == true\r\n                                ? (self.isShow = false)\r\n                                : (self.isShow = true);\r\n                            break;\r\n                        default:\r\n                    }\r\n                },\r\n                false\r\n            );\r\n        }\r\n    },\r\n    filters: {\r\n        //\r\n        projectName(v) {\r\n            if (v.length > 31) {\r\n                return v.substring(0, 28) + \"...\";\r\n            }\r\n            return v;\r\n        }\r\n    }\r\n};\r\nfunction GetSlideDirection(startX, startY, endX, endY) {\r\n    var dy = startY - endY;\r\n    //var dx = endX - startX;\r\n    var result = 0;\r\n    if (dy > 0) {\r\n        //向上滑动\r\n        result = 1;\r\n    } else if (dy < 0) {\r\n        //向下滑动\r\n        result = 2;\r\n    } else {\r\n        result = 0;\r\n    }\r\n    return result;\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" rel=\"stylesheet/scss\">\r\n@import \"../assets/hcsy.scss\";\r\n.home {\r\n    .amap-logo,\r\n    .amap-copyright {\r\n        display: none !important;\r\n    }\r\n    .map {\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n    .map-ul {\r\n        position: fixed;\r\n        bottom: 0;\r\n        height: rem(333);\r\n        width: 100%;\r\n        background-color: #f7f7f7;\r\n    }\r\n    .on {\r\n        height: rem(1230);\r\n        overflow-y: scroll;\r\n        -webkit-overflow-scrolling: touch;\r\n    }\r\n    .item {\r\n        overflow: hidden;\r\n        width: 100%;\r\n        padding: rem(43);\r\n        background-color: white;\r\n        font-size: rem(40);\r\n        border-bottom: 1px solid #ebebeb;\r\n        margin-bottom: rem(25);\r\n        position: relative;\r\n        .item-left {\r\n            float: left;\r\n            img {\r\n                width: rem(330);\r\n                height: rem(217);\r\n            }\r\n        }\r\n        .item-right {\r\n            float: left;\r\n            margin-left: rem(30);\r\n            width: rem(670);\r\n            h4 {\r\n                font-weight: bold;\r\n                margin: rem(30) 0;\r\n            }\r\n            p {\r\n                i {\r\n                    color: #528dff;\r\n                }\r\n                font-size: rem(38);\r\n            }\r\n        }\r\n        .van-button {\r\n            position: absolute;\r\n            right: rem(10);\r\n            top: rem(84);\r\n        }\r\n        .btnon {\r\n            border: 0;\r\n            background-color: red;\r\n        }\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('hheader',{attrs:{\"header\":_vm.hheader}},[_c('i',{staticClass:\"iconfont icon-ren\",attrs:{\"slot\":\"hleft\"},slot:\"hleft\"})]),_vm._v(\" \"),_c('section',{staticClass:\"container has-header has-gray\"},[_c('div',{staticClass:\"map\",attrs:{\"id\":\"container\"},on:{\"click\":_vm.init}}),_vm._v(\" \"),_c('ul',{staticClass:\"map-ul\",class:{'on':_vm.isShow},attrs:{\"id\":\"mapUl\"}},_vm._l((_vm.mapList),function(v){return _c('li',{staticClass:\"item\",on:{\"click\":function($event){_vm.$store.commit('editFooter', 1);_vm.$router.push('/monitoring?projectId='+v.project_id+'')}}},[_c('div',{staticClass:\"item-left\"},[_c('img',{attrs:{\"src\":v.photo,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"item-right\"},[_c('h4',[_vm._v(_vm._s(_vm._f(\"projectName\")(v.project_name)))]),_vm._v(\" \"),_c('p',[_c('i',{staticClass:\"iconfont icon-dingwei\"}),_vm._v(\"\\n                        \"+_vm._s(_vm._f(\"projectName\")(v.location))+\"\\n                    \")])]),_vm._v(\" \"),_c('van-button',{class:{'btnon':v.work_status!=1},attrs:{\"type\":\"primary\",\"size\":\"mini\"}},[_vm._v(_vm._s(_vm._f(\"workStatus\")(v.work_status)))])],1)}))])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a6b40a12\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"importLoaders\\\":1,\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a6b40a12\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./home.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a6b40a12\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/home.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}