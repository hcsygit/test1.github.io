webpackJsonp([5],{"26dS":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=!1,a={data:function(){return{hheader:{title:"贵州联合土木工程结构物安全健康大数据信息平台"},mapList:[],isShow:!1,provinces:[]}},created:function(){this.htouch()},mounted:function(){var t=this;this.$nextTick(function(e){t.getData(),t.gundong()})},methods:{getData:function(){var t=this;t.$.Post("/project/projectList",{},function(e){t.mapList=e.info,e.info.forEach(function(e){if(e.longitude&&e.latitude){var n={name:"",center:e.longitude+","+e.latitude,type:1,subDistricts:[]};t.provinces.push(n)}}),t.provinces.length>0&&t.init()})},gundong:function(){var t=document.getElementById("mapUl");t.onscroll=function(e){i=t.scrollTop<10}},init:function(){var t=this.provinces;if(!t||0==t.length)return!1;for(var e=new AMap.Map("container",{resizeEnable:!0,zoom:4}),n=[],i=0;i<t.length;i+=1){var a;if(0==t[i].type){var s=new AMap.Icon({image:"https://vdata.amap.com/icons/b18/1/2.png",size:new AMap.Size(24,24)});a=new AMap.Marker({icon:s,position:t[i].center.split(","),offset:new AMap.Pixel(-12,-12),zIndex:101,title:t[i].name,map:e})}else if(a=new AMap.Marker({position:t[i].center.split(","),title:t[i].name,map:e}),2===t[i].type){baodao=new AMap.Marker({content:"<div class = 'taiwan'>宝岛台湾</div>",position:t[i].center.split(","),title:t[i].name,offset:new AMap.Pixel(0,0),map:e})}n.push(a)}e.setFitView()},htouch:function(){var t,e=this,n="";document.addEventListener("touchstart",function(e){n=e.target.nodeName.toLowerCase(),e.touches[0].pageX,t=e.touches[0].pageY},!1),document.addEventListener("touchend",function(a){var s;a.changedTouches[0].pageX,s=a.changedTouches[0].pageY;var o=function(t,e,n,i){var a=e-i,s=0;s=a>0?1:a<0?2:0;return s}(0,t,0,s);if(n.indexOf("canvas")>-1)return!1;switch(o){case 0:break;case 1:e.isShow=!0;break;case 2:e.isShow=1!=i}},!1)}},filters:{projectName:function(t){return t.length>31?t.substring(0,28)+"...":t}}};var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("hheader",{attrs:{header:t.hheader}},[n("i",{staticClass:"iconfont icon-ren",attrs:{slot:"hleft"},slot:"hleft"})]),t._v(" "),n("section",{staticClass:"container has-header has-gray"},[n("div",{staticClass:"map",attrs:{id:"container"},on:{click:t.init}}),t._v(" "),n("ul",{staticClass:"map-ul",class:{on:t.isShow},attrs:{id:"mapUl"}},t._l(t.mapList,function(e){return n("li",{staticClass:"item",on:{click:function(n){t.$store.commit("editFooter",1),t.$router.push("/monitoring?projectId="+e.project_id)}}},[n("div",{staticClass:"item-left"},[n("img",{attrs:{src:e.photo,alt:""}})]),t._v(" "),n("div",{staticClass:"item-right"},[n("h4",[t._v(t._s(t._f("projectName")(e.project_name)))]),t._v(" "),n("p",[n("i",{staticClass:"iconfont icon-dingwei"}),t._v("\n                        "+t._s(t._f("projectName")(e.location))+"\n                    ")])]),t._v(" "),n("van-button",{class:{btnon:1!=e.work_status},attrs:{type:"primary",size:"mini"}},[t._v(t._s(t._f("workStatus")(e.work_status)))])],1)}))])],1)},staticRenderFns:[]};var o=n("VU/8")(a,s,!1,function(t){n("AwL8")},null,null);e.default=o.exports},AwL8:function(t,e){}});
//# sourceMappingURL=5.5b867756859c7caa82da.js.map